<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Polar Coordinates Function Drawer</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }

        canvas {
            border: 1px solid #000;
        }

        button {
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <canvas id="polarCanvas" width="400" height="400"></canvas>
    <button id="increaseButton">Increase Progress</button>

    <script>
        const canvas = document.getElementById('polarCanvas');
        const ctx = canvas.getContext('2d');

        const points = []; // Array to store traced points
        let animationFrameId;
        let currentAngle = 0;
        const animationSpeed = 0.005; // Adjust animation speed as needed
        const upperBound = 6.28; // TOOD check this

        // Read the progress value from the cookie
        let progress = parseFloat(getCookie('progress')) || 0.01;

        function getCookie(name) {
            const cookies = document.cookie.split(';');
            for (let i = 0; i < cookies.length; i++) {
                const cookie = cookies[i].trim();
                if (cookie.startsWith(name + '=')) {
                    return cookie.substring(name.length + 1);
                }
            }
            return null;
        }

        function setCookie(name, value, days) {
            const expirationDate = new Date();
            expirationDate.setDate(expirationDate.getDate() + days);
            const cookieValue = `${name}=${value}; expires=${expirationDate.toUTCString()}; path=/`;
            document.cookie = cookieValue;
        }

        function headText(){
            
        }






        function drawPolarFunction(angle) {
            const radius = 100; // Adjust the radius as needed

            // Your polar coordinates function
            const x = 0.04041 + 0.6156 * Math.cos(angle) - 0.3412 * Math.sin(angle) + 0.1344 * Math.cos(2 * angle) - 0.1224 * Math.sin(2 * angle) + 0.08335 * Math.cos(3 * angle) + 0.2634 * Math.sin(3 * angle) - 0.07623 * Math.cos(4 * angle) - 0.09188 * Math.sin(4 * angle) + 0.01339 * Math.cos(5 * angle) - 0.01866 * Math.sin(5 * angle) + 0.1631 * Math.cos(6 * angle) + 0.006984 * Math.sin(6 * angle) + 0.02867 * Math.cos(7 * angle) - 0.01512 * Math.sin(7 * angle) + 0.00989 * Math.cos(8 * angle) + 0.02405 * Math.sin(8 * angle) + 0.002186 * Math.cos(9 * angle);
            const y = 0.04205 + 0.2141 * Math.cos(angle) + 0.4436 * Math.sin(angle) + 0.1148 * Math.cos(2 * angle) - 0.146 * Math.sin(2 * angle) - 0.09506 * Math.cos(3 * angle) - 0.06217 * Math.sin(3 * angle) - 0.0758 * Math.cos(4 * angle) - 0.02987 * Math.sin(4 * angle) + 0.2293 * Math.cos(5 * angle) + 0.1629 * Math.sin(5 * angle) + 0.005689 * Math.cos(6 * angle) + 0.07154 * Math.sin(6 * angle) - 0.02175 * Math.cos(7 * angle) + 0.1169 * Math.sin(7 * angle) - 0.01123 * Math.cos(8 * angle) + 0.02682 * Math.sin(8 * angle) - 0.01068 * Math.cos(9 * angle);

            const tracedPoint = {
                x: canvas.width / 2 + x * radius,
                y: canvas.height / 2 - y * radius
            };

            if (angle < progress) { points.push(tracedPoint); }

            // Draw lines connecting traced points
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.beginPath();
            ctx.moveTo(points[0].x, points[0].y);

            for (let i = 1; i < points.length; i++) {
                ctx.lineTo(points[i].x, points[i].y);
            }

            ctx.strokeStyle = 'red';
            ctx.stroke();

            // Draw a point at the current position
            ctx.beginPath();
            ctx.arc(tracedPoint.x, tracedPoint.y, 3, 0, 2 * Math.PI);
            ctx.fillStyle = 'red';
            ctx.fill();
            ctx.stroke();
        }

        function animate() {
            currentAngle += animationSpeed;
            if (currentAngle > upperBound) {
                currentAngle = 0;
                points.length = 0; // Clear points array for the next cycle
                cancelAnimationFrame(animationFrameId);
            }

            drawPolarFunction(currentAngle);
            animationFrameId = requestAnimationFrame(animate);
        }

        // Start animation on page load
        animate();

        // Update the progress value and the cookie
        function updateProgress(newValue) {
            progress = newValue;
            setCookie('progress', progress, 30); // Set cookie to expire in 30 days
        }

        // Add event listener to the button
        const increaseButton = document.getElementById('increaseButton');
        increaseButton.addEventListener('click', function() {
            updateProgress(progress + 1);
        });
    </script>
</body>
</html>
