<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>Image Puzzle</title>
    <style>
        #puzzle-container {
            display: grid;
            grid-template-columns: repeat(10, 100px);
            gap: 5px;
        }
        .puzzle-piece {
            width: 112px;
            height: 102px;
            border: 0px solid #000;
            cursor: pointer;
            background-size: cover;
        }
    </style>
</head>
<body id="challengeBody">

<h1>Image Puzzle</h1>
<p>Drag and drop puzzle pieces to rearrange the image.</p>
<!-- HINT: If you're stuck, go to /img/puzzle.png for the complete picture :)-->

<div id="puzzle-container"></div>
<button onclick="shufflePuzzle()">Shuffle Puzzle</button>

<script>
    const puzzleContainer = document.getElementById('puzzle-container');
    const puzzleLen = 15; // Change this to adjust the puzzle size
    const puzzleWid = 10
    const puzzlePieces = Array.from({ length: puzzleLen * puzzleWid }, (_, index) => index + 1);

    initializePuzzle();

    function initializePuzzle() {
        puzzleContainer.innerHTML = '';
        puzzlePieces.forEach((pieceNumber, index) => {
            const puzzlePiece = document.createElement('div');
            puzzlePiece.classList.add('puzzle-piece');
            puzzlePiece.style.backgroundImage = `url('img/img (${pieceNumber}).png')`; // Replace with the actual path to your images
            puzzlePiece.setAttribute('draggable', 'true');
            puzzlePiece.addEventListener('dragstart', (e) => handleDragStart(e, index));
            puzzleContainer.appendChild(puzzlePiece);
        });

        puzzleContainer.addEventListener('dragover', (e) => e.preventDefault());
        puzzleContainer.addEventListener('drop', handleDrop);
    }

    function handleDragStart(e, index) {
        e.dataTransfer.setData('text/plain', index.toString());
    }

    function handleDrop(e) {
        e.preventDefault();

        const sourceIndex = parseInt(e.dataTransfer.getData('text/plain'));
        const targetIndex = puzzlePieces.indexOf(parseInt(e.target.style.backgroundImage.match(/\d+/)[0]));

        if (sourceIndex !== targetIndex) {
            const temp = puzzlePieces[sourceIndex];
            puzzlePieces[sourceIndex] = puzzlePieces[targetIndex];
            puzzlePieces[targetIndex] = temp;

            initializePuzzle(); // Refresh the puzzle after swapping pieces

            if (isPuzzleSorted()) {
                alert('Congratulations! Puzzle is properly sorted!');
                // Perform additional actions when the puzzle is properly sorted
            }
        }
    }

    function isPuzzleSorted() {
        for (let i = 0; i < puzzlePieces.length; i++) {
            if (puzzlePieces[i] !== i + 1) {
                return false;
            }
        }
        return true;
    }

    function shufflePuzzle() {
        for (let i = puzzlePieces.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [puzzlePieces[i], puzzlePieces[j]] = [puzzlePieces[j], puzzlePieces[i]];
        }

        initializePuzzle(); // Refresh the puzzle after shuffling
    }
    shufflePuzzle();
</script>

</body>
</html>
